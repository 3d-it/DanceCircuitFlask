{% extends "base.html" %}
{% block content %}


<form method="POST" class="row g-3 mb-4 justify-content-center">
  <div class="col-md-4">
    <!-- Dancer dropdown -->
    <select name="name" class="form-select">
      <option value="">All Dancers</option>
      {% for dancer in dancer_list %}
        <option value="{{ dancer }}" {% if request.form.get('name') == dancer %}selected{% endif %}>
          {{ dancer }}
        </option>
      {% endfor %}
    </select>
  </div>

  <div class="col-md-3">
    <!-- Level dropdown -->
    <select name="level" class="form-select">
      <option value="">All Levels</option>
      <option value="Newcomer" {% if request.form.get('level') == 'Newcomer' %}selected{% endif %}>Newcomer</option>
      <option value="Novice" {% if request.form.get('level') == 'Novice' %}selected{% endif %}>Novice</option>
      <option value="Intermediate" {% if request.form.get('level') == 'Intermediate' %}selected{% endif %}>Intermediate</option>
      <option value="Advanced" {% if request.form.get('level') == 'Advanced' %}selected{% endif %}>Advanced</option>
    </select>
  </div>

  <div class="col-md-2">
    <button type="submit" class="btn btn-primary w-100">Filter</button>
  </div>
</form>

{% if dancers %}
<table class="table table-bordered table-hover text-center align-middle shadow-sm">
  <thead class="table-dark">
    <tr>
      <th>Name</th>
      <th>Competition</th>
      <th>Level</th>
      <th>Points</th>
    </tr>
  </thead>
  <tbody>
    {% for d in dancers %}
      <tr>
        <td>{{ d[1] }}</td>
        <td>{{ d[2] }}</td>
        <td>{{ d[3] }}</td>
        <td>{{ d[4] }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p class="text-center text-muted">No data found for the selected filters.</p>
{% endif %}
{% endblock %}